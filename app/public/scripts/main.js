function switchBoards(){$(".switcher").toggle("slide",function(){$("#secondBoard").toggleClass("hidden")})}function fadeBoards(){var e=[];document.querySelectorAll(".sortable").forEach(function(t){t.childNodes.length>1&&e.push(t.parentNode)}),e.every(function(t,s){return!!t.classList.contains("hidden")||($(t).fadeOut("2000",function(){t.classList.add("hidden")}),s===e.length-1?($(e[0]).fadeIn("2000",function(){e[0].classList.remove("hidden")}),!1):($(e[s+1]).fadeIn("2000",function(){e[s+1].classList.remove("hidden")}),!1))})}function saveOrder(){showMessage===!0&&(window.removeEventListener("click",fadeBoards),setTimeout(function(){for(var e=document.querySelectorAll('div[class^="flex-widget-"]'),t=0;t<e.length;t++)e[t].dataset.position=t+1;document.getElementById("saveIt").classList.remove("hidden")},1e3))}$(function(){$(".sortable").sortable(),$(".sortable").disableSelection()}),document.querySelectorAll('input[type="checkbox"], input[type="radio"], button').forEach(function(e){e.addEventListener("focus",function(){this.parentNode.classList.add("focused")}),e.addEventListener("blur",function(){this.parentNode.classList.remove("focused")})}),document.querySelector("#favouritesButton")&&(document.querySelector("#favouritesButton").onclick=function(){document.getElementById(this.dataset.target).classList.remove("hidden"),this.classList.add("hidden")},document.getElementById("closeFave").onclick=function(){document.getElementById("faveWrapper").classList.add("hidden"),document.querySelector("#favouritesButton").classList.remove("hidden")}),$(".select-radio").click(function(){$(this).parent().addClass("selected"),$(this).parent().siblings().not($("legend")).removeClass("selected"),$("#widget-select").fadeIn("slow")}),$("input[type=checkbox]").change(function(){$(this).parent().hasClass("selected")?$(this).parent().removeClass("selected"):($(this).parent().addClass("selected"),$("#preview-submit").fadeIn("fast").removeClass("hidden"))});var orderingObject={},sizeCounter=0;if($(".select-checkbox").click(function(){if(document.querySelectorAll(".select-checkbox").forEach(function(e){e.parentNode.classList.contains("disabled")&&(e.parentNode.classList.remove("disabled"),e.disabled=!1)}),$(this).parent().hasClass("selected")){$("#"+$(this).data("target")).fadeOut("fast").addClass("hidden").removeClass("displayed"),sizeCounter-=parseInt($("#"+$(this).data("target")).data("width"))}else{var e=document.getElementById("pc-select").checked?"pc":"tv",t="pc"===e?8:10;document.querySelector("#"+this.dataset.target).classList.add("flex-widget-preview-"+e+"-"+document.querySelector("#"+this.dataset.target).dataset.width),document.querySelectorAll([".flex-wrapper-preview",".flex-wrapper-preview-two",".flex-wrapper-preview-three",".flex-wrapper-preview-four"]).forEach(function(t){t.classList.contains(e+"-wrapper")||t.classList.add(e+"-wrapper")});var s=$(".flex-wrapper-preview div:last");document.getElementById("previewPane").classList.contains("hidden")&&(document.getElementById("previewPane").classList.remove("hidden"),document.querySelector(".flex-wrapper-preview").classList.remove("hidden"),document.querySelector(".flex-wrapper-preview").classList.add("displayed")),"tv"===e&&sizeCounter>=30||"pc"===e&&sizeCounter>=24?(s=$(".flex-wrapper-preview-four div:last"),$(".flex-wrapper-preview-four").hasClass("hidden")&&($(".flex-wrapper-preview-four").removeClass("hidden").addClass("displayed"),$("#preview-breaker-two").fadeIn("slow").removeClass("hidden"))):"tv"===e&&sizeCounter>=20||"pc"===e&&sizeCounter>=16?(s=$(".flex-wrapper-preview-three div:last"),$(".flex-wrapper-preview-three").hasClass("hidden")&&$(".flex-wrapper-preview-three").removeClass("hidden").addClass("displayed")):("tv"===e&&sizeCounter>=10||"pc"===e&&sizeCounter>=8)&&(s=$(".flex-wrapper-preview-two div:last"),$(".flex-wrapper-preview-two").hasClass("hidden")&&($(".flex-wrapper-preview-two").removeClass("hidden").addClass("displayed"),$("#preview-breaker").fadeIn("slow").removeClass("hidden"))),$("#"+$(this).data("target")).fadeIn("fast").removeClass("hidden").addClass("displayed"),$("#"+$(this).data("target")).insertAfter(s);var d=document.getElementById(this.dataset.target),a=document.querySelectorAll(".flex-widget-preview-"+e+"-1.displayed").length+document.querySelectorAll(".flex-widget-preview-"+e+"-2.displayed").length+document.querySelectorAll(".flex-widget-preview-"+e+"-3.displayed").length+$(".flex-widget-preview-"+e+"-4.displayed").length,n=document.querySelectorAll('div[class^="flex-wrapper-preview"].displayed').length;d.dataset.position=a,orderingObject[d.dataset.position]={widget:$(this).val(),size:d.dataset.width,display:e,height:d.dataset.height,position:d.dataset.position,dataCaller:d.dataset.caller,dataRate:d.dataset.rate,dataCallTo:d.dataset.call,style:d.dataset.style},sizeCounter+=parseInt(d.dataset.width)*parseInt(d.dataset.height)}document.querySelectorAll(".select-checkbox").forEach(function(e){var s=parseInt(document.getElementById(e.dataset.target).dataset.width);(s+sizeCounter-t*(n-1)>t&&sizeCounter-t*(n-1)<t||s+sizeCounter-t*(n-1)>t/2&&sizeCounter-t*(n-1)<t/2)&&(e.checked||(e.parentNode.classList.add("disabled"),e.disabled=!0))})}),$("#preview-submit").click(function(){$("#hiddenOrdering").val(JSON.stringify(orderingObject));var e=["Just getting your dashboards ready...","Parsing JSON...","Working on it...","Loading..."];$("#dashboard-settings, #settingsButton, #favouritesButton").addClass("hidden"),$("#loadingMessages").fadeIn("slow").removeClass("hidden"),$("#loadingMessage").text(e[Math.floor(Math.random()*e.length)])}),$(".switcher-button").click(function(){$("#dashboard-settings, #settingsButton").addClass("hidden"),$("#settingsMenu").fadeIn("slow"),document.querySelector(".favourites-wrapper").classList.add("hidden")}),$(".return-button").click(function(){$("#settingsMenu").fadeOut("slow",function(){$("#dashboard-settings, #settingsButton").removeClass("hidden"),document.querySelector(".favourites-wrapper").classList.remove("hidden")})}),document.querySelectorAll("button.settings-tab-button").forEach(function(e){e.onclick=function(){document.querySelectorAll("button.settings-tab-button").forEach(function(e){e.classList.contains("current-tab")&&(e.classList.remove("current-tab"),document.getElementById(e.dataset.target).classList.add("hidden"))}),this.classList.add("current-tab"),document.getElementById(this.dataset.target).classList.remove("hidden")}}),document.getElementById("settingsMenu")&&(!function(){function e(e,t,s){document.querySelectorAll(e).forEach(function(e){document.querySelector("#"+e.dataset.target).dataset[t]=e.value*s})}document.querySelector("#updateSizes").onclick=function(){e(".width-input","width",1),e(".height-input","height",1),this.classList.add("clicked"),document.getElementById("updateSizeMessage").classList.remove("hidden"),setTimeout(function(){document.getElementById("updateSizes").classList.remove("clicked"),document.getElementById("updateSizeMessage").classList.add("hidden")},3e3)},document.querySelector("#updateCallRate").onclick=function(){e(".call-rate-input","rate",6e4),this.classList.add("clicked"),document.getElementById("updateRateMessage").classList.remove("hidden"),setTimeout(function(){document.getElementById("updateCallRate").classList.remove("clicked"),document.getElementById("updateRateMessage").classList.add("hidden")},3e3)},document.querySelectorAll(".settings-input-radio").forEach(function(e){e.onclick=function(){this.parentNode.parentNode.childNodes.forEach(function(e){"undefined"!=typeof e.classList&&e.classList.remove("selected")}),this.parentNode.classList.add("selected")}})}(),document.querySelectorAll(".st-input").forEach(function(e){e.onclick=function(){var e=this.value;this.parentNode.parentNode.childNodes.forEach(function(e){"undefined"!=typeof e.classList&&e.classList.contains("st-type")&&e.classList.remove("selected")}),document.querySelector("#"+this.dataset.target).parentNode.childNodes.forEach(function(e){"undefined"!=typeof e.classList&&e.classList.add("hidden")}),document.querySelector("#"+this.dataset.target).classList.remove("hidden"),this.parentNode.classList.add("selected"),document.querySelectorAll('div[id$="-preview"]').forEach(function(t){"undefined"!=typeof t.dataset.style&&(t.dataset.style=e)})}})),$("#secondBoard").children().length>0&&window.addEventListener("click",fadeBoards),document.querySelector(".sortable")&&!document.querySelector("#loadedDashboard")){var showMessage=!0,orderObject={},allWidgets=document.querySelectorAll('div[class^="flex-widget-"]');allWidgets.forEach(function(e){e.addEventListener("mouseup",saveOrder)}),document.getElementById("saveYes").onclick=function(){document.getElementById("saveName").classList.remove("hidden")},document.getElementById("sendData").onclick=function(){allWidgets.forEach(function(e){orderObject[parseInt(e.dataset.position)]={widget:e.dataset.widget,size:e.dataset.size,display:e.dataset.display,dataRate:e.dataset.rate,dataCallTo:e.dataset.call,style:e.dataset.style}}),$.post("save-fave",{ordering:JSON.stringify(orderObject),name:document.getElementById("name").value}).done(function(e){$("#savedMessage").text(e),setTimeout(function(){document.getElementById("saveIt").classList.add("hidden")},3e3)}),window.addEventListener("click",fadeBoards)},document.getElementById("saveNo").onclick=function(){document.getElementById("saveIt").classList.add("hidden"),window.addEventListener("click",fadeBoards)},document.getElementById("saveStop").onclick=function(){showMessage=!1,document.getElementById("saveIt").classList.add("hidden"),window.addEventListener("click",fadeBoards)}}$("#getFave").click(function(){$.post("retrieve-fave",function(e,t){$("#retrievedData").text(e[1].widget)})});