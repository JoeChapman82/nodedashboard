"use strict";function Chart(t,i,a){function h(t,i){return t+i}var s=this;(document.getElementById(t).parentElement.classList.contains("flex-widget-tv-1")||document.getElementById(t).parentElement.classList.contains("flex-widget-tv-double-width-2"))&&document.getElementById(t).setAttribute("height","430"),this.canvas={width:document.getElementById(t).width,height:document.getElementById(t).height,marginSmall:document.getElementById(t).width/30,margin:document.getElementById(t).width/10,padding:document.getElementById(t).width/120},this.labels={title:document.getElementById(i).getAttribute("data-title"),x:document.getElementById(i).getAttribute("data-x"),y:document.getElementById(i).getAttribute("data-y")},this.data=document.getElementById(a),this.ctx=document.getElementById(t).getContext("2d"),this.colours=["rgba(70, 130, 180, 1)","rgba(71, 187, 179, 1)","rgba(236, 102, 60, 1)","rgba(220, 89, 69, 1)","rgba(6, 111, 154, 1)","rgba(0, 128, 128, 1)","blue","pink"],this.dataArrayFull=[],function(){document.querySelectorAll("#"+s.data.id+" td").forEach(function(t){var i=t.innerHTML;s.dataArrayFull.push(i)})}(),this.numbersArray=function(){var t=0,i=[];return s.dataArrayFull.forEach(function(a){t%2!==0&&i.push(parseFloat(a)),t++}),i}(),this.itemsArray=function(){var t=0,i=[];return s.dataArrayFull.forEach(function(a){t%2===0&&($.isNumeric(a)?i.push(parseFloat(a)):i.push(a)),t++}),i}(),this.highestPointY=Math.max(Math.max.apply(Math,this.numbersArray)),this.yPeak=Math.ceil(this.highestPointY/Math.pow(10,this.highestPointY.toString().length))*Math.pow(10,this.highestPointY.toString().length),this.highestPointY.toString()[0]<5&&(this.yPeak/=2),this.highestPointX=Math.max(Math.max.apply(Math,this.itemsArray)),this.xPeak=Math.ceil(this.highestPointX/Math.pow(10,this.highestPointX.toString().length))*Math.pow(10,this.highestPointX.toString().length),this.highestPointX.toString()[0]<5&&(this.xPeak/=2),this.totalNumbersArray=this.numbersArray.reduce(h,0),this.columnNumber=this.numbersArray.length,this.columnWidth=(this.canvas.width-2*this.canvas.marginSmall-(this.columnNumber-2)*this.canvas.padding)/this.columnNumber,this.relativePointY=(this.canvas.height-2*this.canvas.marginSmall)/this.yPeak,this.relativePointX=(this.canvas.height-2*this.canvas.marginSmall)/this.xPeak,this.relativePointXScatter=(this.canvas.width-2*this.canvas.margin)/this.xPeak,this.relativePointYScatter=(this.canvas.height-2*this.canvas.margin)/this.yPeak,this.relativePercent=100/this.totalNumbersArray,this.relativeRadian=2/this.totalNumbersArray,this.animateArray=[],this.numbersArray.forEach(function(){s.animateArray.push(0)}),this.markers=5,this.intervalLoop=!1}Chart.prototype.drawTitle=function(){this.ctx.font="bold 18px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="rgba(0, 0, 0, 1)",this.ctx.fillText(this.labels.title,this.canvas.width/2,20)},Chart.prototype.drawBarChart=function(){for(var t=0,i=0;i<this.columnNumber;i++){this.ctx.beginPath(),this.ctx.lineWidth="2",this.ctx.strokeStyle="grey";var a=this.ctx.createLinearGradient(0,this.canvas.height,0,.25*this.canvas.height);a.addColorStop(0,"white"),a.addColorStop(1,this.colours[t]),this.ctx.rect(this.canvas.marginSmall+i*this.columnWidth+(i-1)*this.canvas.padding,this.canvas.height-this.canvas.marginSmall-this.animateArray[i]*this.relativePointY,this.columnWidth,this.animateArray[i]*this.relativePointY),this.ctx.fillStyle=a,this.ctx.fill(),this.ctx.stroke(),this.ctx.font="16px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="rgba(0, 0, 0, 1)",this.ctx.fillText(this.itemsArray[i],this.canvas.marginSmall+i*this.columnWidth+(i-1)*this.canvas.padding+this.columnWidth/2,this.canvas.height-this.canvas.marginSmall+16,this.columnWidth),this.animateArray[i]>this.yPeak/10?this.ctx.fillText(this.animateArray[i],this.canvas.marginSmall+i*this.columnWidth+(i-1)*this.canvas.padding+this.columnWidth/2,this.canvas.height-this.canvas.marginSmall-this.animateArray[i]*this.relativePointY+16,this.columnWidth):this.ctx.fillText(this.animateArray[i],this.canvas.marginSmall+i*this.columnWidth+(i-1)*this.canvas.padding+this.columnWidth/2,this.canvas.height-this.canvas.marginSmall-this.animateArray[i]*this.relativePointY-this.canvas.padding,this.columnWidth),this.ctx.closePath(),t++,t>this.colours.length-1&&(t=0)}},Chart.prototype.mainBarChartDraw=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawTitle(),this.drawBarChart();for(var t=0;t<this.animateArray.length;t++)this.numbersArray[t]-this.animateArray[t]>1e4?this.animateArray[t]+=1e3:this.numbersArray[t]-this.animateArray[t]>1e3?this.animateArray[t]+=100:this.numbersArray[t]-this.animateArray[t]>100?this.animateArray[t]+=10:this.animateArray[t]<this.numbersArray[t]&&this.animateArray[t]++,this.animateArray[t]>=this.highestPointY&&clearInterval(this.intervalLoop)},Chart.prototype.interval=function(t){var i=this;this.intervalLoop=setInterval(function(){i.mainBarChartDraw()},t)},Chart.prototype.drawAxis=function(){this.ctx.beginPath(),this.ctx.moveTo(this.canvas.margin,this.canvas.height-this.canvas.margin),this.ctx.lineTo(this.canvas.margin,this.canvas.margin),this.ctx.moveTo(this.canvas.margin,this.canvas.height-this.canvas.margin),this.ctx.lineTo(this.canvas.width-this.canvas.margin,this.canvas.height-this.canvas.margin),this.ctx.stroke(),this.ctx.save(),this.ctx.translate(this.canvas.width,this.canvas.height),this.ctx.rotate(-Math.PI/2),this.ctx.textAlign="center",this.ctx.fillText(this.labels.y,this.canvas.height/2,-this.canvas.width+this.canvas.margin/2),this.ctx.restore(),this.ctx.fillText(this.labels.x,this.canvas.width/2,this.canvas.height-4),this.ctx.closePath()},Chart.prototype.drawMarkers=function(){this.ctx.font="12px Arial",this.ctx.textAlign="center",this.ctx.fillText("0",this.canvas.margin-6,this.canvas.height-this.canvas.margin+12);for(var t=1;t<this.markers+1;t++)this.ctx.textAlign="start",this.ctx.fillText(this.xPeak/this.markers*t,(this.canvas.width-2*this.canvas.margin)/this.markers*t,this.canvas.height-this.canvas.margin+12),this.ctx.fillText(this.yPeak/this.markers*t,this.canvas.margin/2,this.canvas.margin+(this.canvas.height-2*this.canvas.margin)/this.markers*(this.markers-t))},Chart.prototype.drawChartPoints=function(){for(var t=0;t<this.itemsArray.length;t++)this.ctx.beginPath(),this.ctx.arc(this.canvas.margin+this.itemsArray[t]*this.relativePointXScatter,this.canvas.height-this.canvas.margin-this.numbersArray[t]*this.relativePointYScatter,5,0,2*Math.PI),this.ctx.stroke(),this.ctx.fillStyle="rgba(70, 130, 180, 1)",this.ctx.fill(),this.ctx.closePath()},Chart.prototype.scatterChart=function(){this.drawTitle(),this.drawAxis(),this.drawMarkers(),this.drawChartPoints()},Chart.prototype.drawPieOutline=function(){this.ctx.beginPath(),this.ctx.lineWidth=5,this.ctx.strokeStyle="black",this.ctx.arc(this.canvas.width/2,this.canvas.height/2-2*this.canvas.marginSmall,(this.canvas.width-2*this.canvas.marginSmall)/2,0*Math.PI,2*Math.PI),this.ctx.stroke(),this.ctx.fillStyle="grey",this.ctx.fill(),this.ctx.closePath()},Chart.prototype.drawPie=function(){var t=this,i=0,a=0;this.ctx.lineWidth=3,this.ctx.strokeStyle="black",this.numbersArray.forEach(function(h){t.ctx.beginPath(),t.ctx.moveTo(t.canvas.width/2,t.canvas.height/2-2*t.canvas.marginSmall),t.ctx.arc(t.canvas.width/2,t.canvas.height/2-2*t.canvas.marginSmall,(t.canvas.width-2*t.canvas.marginSmall)/2,i*Math.PI,(i+h*t.relativeRadian)*Math.PI),t.ctx.lineTo(t.canvas.width/2,t.canvas.height/2-2*t.canvas.marginSmall),t.ctx.stroke(),t.ctx.fillStyle=t.colours[a],t.ctx.fill(),t.ctx.closePath(),i+=h*t.relativeRadian,a++,a===t.colours.length&&(a=0)})},Chart.prototype.drawPieKey=function(){var t=this,i=0,a=0,h=0;this.itemsArray.forEach(function(s){t.ctx.beginPath(),t.ctx.rect(t.canvas.marginSmall/2+a,.85*t.canvas.height-h,12,12),t.ctx.strokeStyle="black",t.ctx.stroke(),t.ctx.fillStyle=t.colours[i],t.ctx.fill(),t.ctx.font="12px Arial",t.ctx.textAlign="left",t.ctx.textBaseline="top",t.ctx.fillStyle="rgba(0, 0, 0, 1)",t.ctx.fillText(s,t.canvas.marginSmall/2+a+15,.85*t.canvas.height-h),t.ctx.closePath(),i++,a+=t.canvas.width/4,i>t.colours.length&&(i=0),4===i&&(h-=25,a=0)})},Chart.prototype.pieChart=function(){this.drawTitle(),this.drawPieOutline(),this.drawPie(),this.drawPieKey()},Chart.prototype.drawDoughnutHole=function(){this.ctx.lineWidth=3,this.ctx.strokeStyle="black",this.ctx.beginPath(),this.ctx.arc(this.canvas.width/2,this.canvas.height/2-2*this.canvas.marginSmall,(this.canvas.width-2*this.canvas.marginSmall)/4,0,2*Math.PI),this.ctx.stroke(),this.ctx.fillStyle="white",this.ctx.fill(),this.ctx.closePath()},Chart.prototype.doughnutChart=function(){this.drawTitle(),this.drawPieOutline(),this.drawPie(),this.drawPieKey(),this.drawDoughnutHole()};